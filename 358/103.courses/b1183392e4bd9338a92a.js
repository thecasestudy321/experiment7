webpackJsonp([103],{350:function(e,a,t){"use strict";function n(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function r(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function i(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}(),s=function e(a,t,n){null===a&&(a=Function.prototype);var r=Object.getOwnPropertyDescriptor(a,t);if(void 0===r){var i=Object.getPrototypeOf(a);return null===i?void 0:e(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)};a.Instance=function(e){function a(){n(this,a);var e=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return e.init.apply(e,arguments),e.info={CONCLUSION:"kk",CONCLUSIONAlign:"center",TITILE:"桌子到底有多长",ISOFFSET:!0},e}return i(a,e),o(a,[{key:"frame0",value:function(){}},{key:"frame1",value:function(){function e(e){var r=e.name,i=e[r+"Copy"];NBDrag.addDrag(i),i.addEventListener(NBDrag.event.STOP_DRAG,a),i.addEventListener(NBDrag.event.DRAG_MOVE,t),i.addEventListener(NBDrag.event.START_DRAG,n),i.startX=i.x,i.startY=i.y}function a(){var e=this,r=e.name.split("Copy")[0],i=e.parent[r+"Frames"];T(e,N)?(instance.resetBtnEnable(!0),O.addChildWithSamePos(e),TweenMax.to(e,1,{y:A.y-10,onComplete:s}),GlobalEffect.fadeOut(e),e.removeEventListener(NBDrag.event.STOP_DRAG,a),e.removeEventListener(NBDrag.event.DRAG_MOVE,t),e.removeEventListener(NBDrag.event.START_DRAG,n)):(i.currentFrame=0,e.x=e.startX,e.y=e.startY)}function t(){T(this,N)?TweenMax.to(A,1,{alpha:.4}):TweenMax.to(A,.1,{alpha:0})}function n(){var e=this,a=e.name.split("Copy")[0];e.parent[a+"Frames"].currentFrame=1}function r(){A.y=A.startY,A.x<=b.x-A.width?A.x=b.x-A.width:A.x>=b.x+b.width&&(A.x=b.x+b.width)}function i(){Math.abs(A.x-b.x)<=20&&(A.x=b.x,NBDrag.removeDrag(A),A.removeEventListener(NBDrag.event.DRAG_MOVE,r),TweenMax.to(L,.3,{y:"-=36",easy:Sine.easyInOut}),TweenMax.to(S,1,{alpha:1}),TweenMax.to(k,1,{alpha:1}),k.addEventListener(TouchEvent.TAP,o))}function o(){setTimeout(function(){A.mask=R,C.alpha=1},500),TweenMax.to(S,3,{currentFrame:30}),TweenMax.to(k,1.2,{y:"-=94",onComplete:h}),TweenMax.to(k,.4,{currentFrame:10,repeat:2,yoyo:!0})}function s(){A.alpha=1,TweenMax.to(L,.3,{y:"-=34",easy:Sine.easyInOut}),A.startY=A.y,NBDrag.addDrag(A),A.addEventListener(NBDrag.event.DRAG_MOVE,r),A.addEventListener(NBDrag.event.STOP_DRAG,i)}function h(){GlobalEffect.fadeOut(k),GlobalEffect.fadeOut(G),TweenMax.to(_,1,{alpha:0,x:"+= 200"}),TweenMax.to(B,1,{alpha:1,x:"-= 200"}),TweenMax.to(L,.3,{y:"-=34",easy:Sine.easyInOut}),d()}function d(){for(var e=0;e<B.children.length;e++){var a=B.children[e],t=+a.name.substr(-1);a.index=t,l(a)}}function l(e){var a=e.name,t=e[a+"Copy"];t.index=t.parent.index,NBDrag.addDrag(t),t.startX=t.x,t.startY=t.y,0===t.index&&(t.scaleHand=1.5,e.count=5),1===t.index&&(t.scaleHand=1.3,e.count=6),2===t.index&&(t.scaleHand=1.1,e.count=7),t.addEventListener(NBDrag.event.STOP_DRAG,v),t.addEventListener(NBDrag.event.DRAG_MOVE,p),t.addEventListener(NBDrag.event.START_DRAG,c)}function c(){var e=this;e.parent["hand"+e.index+"Frames"].currentFrame=1,e.scale.x=e.scale.y=e.scaleHand,instance.tip.hideTip(),O.setChildIndex(this.parent.parent,O.children.length-1),L.alpha||D(-189.6)}function p(){var e=this,a=T(e,N),t=O["shadow"+e.index],n=t[0];a?(n.alpha=.5,u(n,e)):n.alpha=0}function u(e,a){var t=a.parent.toGlobal(a.position),n=O.toLocal(t);e.x=n.x}function v(){var e=this,a=T(e,N);e.x=e.startX,e.y=e.startY,e.scale.x=e.scale.y=1;var t=O["shadow"+e.index],n=t[0],r=e.parent["hand"+e.index+"Frames"];if(a){n.alpha=1,P.visible=!0;var i=O["shadow"+e.index];if(0!==X.length)i!==H?(instance.tip.showTip("请用相同的手进行测量"),r.gotoAndStop(0),n.alpha=0):H.isLink?(NBDrag.addDrag(n),n.addEventListener(NBDrag.event.START_DRAG,w),n.addEventListener(NBDrag.event.DRAG_MOVE,x),n.addEventListener(NBDrag.event.STOP_DRAG,y),g(n,!0)):(n.alpha=0,1===X.length?instance.tip.showTip("上一个左端对齐"):instance.tip.showTip("上一个首尾相连"));else{var o=!0,s=!1,h=void 0;try{for(var d,l=U[Symbol.iterator]();!(o=(d=l.next()).done);o=!0){d.value.alpha=0}}catch(e){s=!0,h=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw h}}NBDrag.addDrag(n),n.addEventListener(NBDrag.event.START_DRAG,w),n.addEventListener(NBDrag.event.DRAG_MOVE,x),n.addEventListener(NBDrag.event.STOP_DRAG,y),g(n,!0),H=i}}else{O["shadow"+e.index]!==H&&r.gotoAndStop(0)}}function f(){if(P.visible){var e=H.indexNum,a=[].concat(H),t=a.concat(X);U=t;for(var n=0;n<t.length;n++){var r=t[n];r.alpha=1,r.x=I+r.width*r.index}B["hand"+e].txt.text=H.count,J++,m(J),B["hand"+e]["hand"+e+"Copy"].interactive=!1,P.visible=!1,H=[],X=[]}}function w(){instance.tip.hideTip()}function x(){var e=this;e.y=V,e.x>820&&(e.x=820),e.x<262&&(e.x=I)}function y(){g(this,!1)}function g(e,a){var t=I+e.width*e.index,n=O[e.name.substr(0,7)],r=+e.name.substr(-2,1);if(D(-219),Math.abs(t-e.x)<Y){if(e.x=t,e.interactive=!1,n.isLink=!0,a){var i=n.shift();X.push(i)}0===n.length&&(U=H.concat(X),B["hand"+r].txt.text=H.count,J++,m(J),P.visible=!1,H=[],X=[],B["hand"+r]["hand"+r+"Copy"].interactive=!1)}else{if(n.isLink=!1,a){var o=n.shift();X.push(o)}0===e.index?instance.tip.showTip("请让手拃对齐桌子左端"):instance.tip.showTip("请让手拃首尾相接")}}function T(e,a){return!!e.hitTest(a)}function D(e){TweenMax.to(L,.5,{y:e,alpha:1}),TweenMax.to(F,.2,{alpha:0,y:501.6})}function m(e){3===e?(TweenMax.killTweensOf([F,L]),TweenMax.to([F,L],0,{alpha:0}),TweenMax.to(j,.3,{alpha:1})):(TweenMax.to(L,.2,{alpha:0}),TweenMax.to(F,.3,{alpha:1,y:471.6}))}var O=this,b=O.table,E=O.scrollText,M=E.textMask,L=E.textTips,N=O.hitArea,_=O.paper,A=O.longPaper,S=O.shears,k=S.littleShears,B=O.handContainer,R=A.longPaperMask.children[0],G=O.greenTips,P=O.autoClick,C=O.lineStrok,F=O.lastTip,j=O.great,I=262,V=227,Y=20,H=[],X=[],U=[],J=0;!function(){E.mask=M.children[0],N.alpha=0,A.alpha=0,B.alpha=0,R.alpha=0,F.alpha=0,B.hand0.hand0Copy.line.alpha=0,B.hand1.hand1Copy.line.alpha=0,B.hand2.hand2Copy.line.alpha=0,C.alpha=0,instance.viewStack.frame1.longPaper.longPaperMask.x=0,S.alpha=0,F.startY=F.y,e(_),j.alpha=0,P.visible=!1,O.shadow0=[O.shadow00,O.shadow01,O.shadow02,O.shadow03,O.shadow04],O.shadow1=[O.shadow10,O.shadow11,O.shadow12,O.shadow13,O.shadow14,O.shadow15],O.shadow2=[O.shadow20,O.shadow21,O.shadow22,O.shadow23,O.shadow24,O.shadow25,O.shadow26],O.shadow0.isLink=O.shadow1.isLink=O.shadow2.isLink=!1,O.shadow0.count=5,O.shadow1.count=6,O.shadow2.count=7,O.shadow0.indexNum=0,O.shadow1.indexNum=1,O.shadow2.indexNum=2}(),function(){for(var e=0;e<O.shadow0.length;e++){var a=O.shadow0[e];a.index=e,a.alpha=0,a.isLink=!1,a.scale.x=a.scale.y=1.5,a.y=V}for(var t=0;t<O.shadow1.length;t++){var n=O.shadow1[t];n.alpha=0,n.index=t,n.isLink=!1,n.scale.x=n.scale.y=1.3,n.y=V}for(var r=0;r<O.shadow2.length;r++){var i=O.shadow2[r];i.alpha=0,i.index=r,i.isLink=!1,i.scale.x=i.scale.y=1.1,i.y=V}O.shadow0[O.shadow0.length-1].line.alpha=0,O.shadow1[O.shadow1.length-1].line.alpha=0,O.shadow2[O.shadow2.length-1].line.alpha=0}(),P.addEventListener(TouchEvent.TAP,f)}},{key:"start",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"start",this).call(this),this.gotoStep("frame1")}}]),a}(nb.stem.STEMMain)}});